<div class="container-fluid">
  <a href="#" data-bs-target="#sidebar" data-bs-toggle="collapse" (click)="afficheMenuMobile()"
    style="position:relative; top:2%; left:90%;"><i class="bi bi-list py-2 p-1 " style="color:black"></i>
  </a>
  <div class="row flex-nowrap">
    <div class="col-auto px-2" *ngIf="menuBureau">
      <app-menu></app-menu>
    </div>

    <main class="col ps-md-2 pt-2  " style=" height: 100vh ;">
      <div class="container">
        <button type="button" class="btn" style="margin-left:92% ;">
          <i class="bi bi-bell-fill position-relative" style="font-size:30px ;">
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill"
              style="font-size:15px; background-color: #ff6600;">
              99+
            </span></i>
        </button>

        <div class="row">
          <!-- Importation -->

          <div class="col-12 col-md-4 col-xs-6 py-3 text-center form">
            <div class="m-3">
              <form [formGroup]="myForm" (ngSubmit)="submit()">
                <p class="h3"><b>Importer un fichier</b></p>

                <div class="trait mb-5"></div>

                <div class="mb-4 altert " style="border-radius:10px;">
                  <div>
                    <p *ngIf="bool_erreurImpFr" class="m-3 alert-danger" style="font-size: 1.2rem; font-weight: bold;">
                      {{erreurImpFr}}</p>
                    <p *ngIf="bool_erreurImpBack"
                      [ngClass]="erreurImpBack.status == true ? 'alert-success' : 'alert-warning' " class="m-3"
                      style="font-size: 1.2rem; font-weight: bold;">{{erreurImpBack.contenu}}</p>
                  </div>
                </div>

                <div class="col-12 col-md-12">
                  <div class="mb-3 form-row form-floating">
                    <input type="text" name="libele" id="libele" placeholder="Libelle de la liste"
                      class="form form-control inputvalue" formControlName="libelleListe">
                    <label for="libele">Libelle de la liste </label>
                  </div>
                </div>


                <div class="col-12 col-md-12">
                  <div class="mb-3 form-row form-floating">
                    <select [(ngModel)]="libelleActivite" id="choice" class="form-select form-control inputvalue"
                      formControlName="libelleActivite">
                      <option selected>--Choisir Activité--</option>
                      <option *ngFor="let listeActivites of listeActivites$" [(ngValue)]="listeActivites.nom">
                        {{listeActivites.nom}}</option>
                    </select>
                    <label style="font-size: 1.2rem; color: black;">Choisir une Activité</label>
                  </div>
                </div>

                <div class="col-12 col-md-12">
                  <div class=" mb-3 mt-3 bttn">
                    <input type="file" class="form-control" formControlName="file" (change)="onFileChange($event)" />
                  </div>
                </div>
                <button class="btn btnImport mb-2 mt-3 ">Importer</button>
              </form>
            </div>
          </div>

          <!-- le tirage -->
          <div class="col-md-2 col-xs-1 py-3"></div>
          <div class="col-12 col-md-6 col-xs-6 text-center form">

            <div class="my-3 mt-5">
              <div class="m-3">
                <form>
                  <p class="h3"><b>Faire Tirage</b></p>

                  <div class="trait mt-3"></div><br>

                  <div class="row">

                    <div class="mb-4 altert " style="border-radius:10px;">
                      <div>
                        <p *ngIf="bool_erreurFr" class="m-3 alert-danger" style="font-size: 1.2rem; font-weight: bold;">
                          {{erreurTirageFr}}</p>
                        <p *ngIf="bool_erreurBack"
                          [ngClass]="erreurTirageBack.status == true ? 'alert-success' : 'alert-warning' " class="m-3"
                          style="font-size: 1.2rem; font-weight: bold;">{{erreurTirageBack.contenu}}</p>
                      </div>
                    </div>

                    <div class="col-12 col-md-6 mb-3">
                      <div class="mb-3 form-row form-floating">
                        <input type="text" id="libele" placeholder="libelle du tirage" name="libelleTirage"
                          [(ngModel)]="libelleTirage" class="form form-control inputvalue">
                        <label for="libele">Libelle Tirage</label>
                      </div>
                    </div>

                    <div class="col-12 col-md-6">
                      <div class="mb-3 form-row form-floating  ">
                        <input type="number" id="libele" min="1" placeholder="nombre à tiré" name="nombrePostulantTire"
                          [(ngModel)]="nombrePostulantTire" class="form form-control inputvalue">
                        <label for="num">Nombre à tiré </label>
                      </div>
                    </div>

                    <div class="col-12 col-md-6">
                      <div class="mb-3 form-row form-floating ">
                        <select name="libelleListet" [(ngModel)]="libelleListet"
                          class="form-select form-control inputvalue">
                          <option selected>--Choisir Liste--</option>
                          <option *ngFor="let liste of listes$" [(ngValue)]="liste.libelleliste">{{liste.libelleliste}}
                          </option>
                        </select>
                        <label style="font-size: 1.2rem; color: black;">Choisir une Liste</label>
                      </div>
                    </div>

                    <div class="col-12 col-md-6">
                      <div class="mb-3 form-row form-floating ">
                        <select name="libelleActivite" [(ngModel)]="libelleActivite"
                          class="form-select form-control inputvalue">
                          <option selected>--Choisir Activité--</option>
                          <option *ngFor="let listeActivites of listeActivites$" [(ngValue)]="listeActivites.nom">
                            {{listeActivites.nom}}</option>
                        </select>
                        <label style="font-size: 1.2rem; color: black;">Choisir une Activité </label>
                      </div>
                    </div>

                  </div>
                  <button type="submit" (click)="postTirage()" class="btn btnImport mb-2 mt-3 ">Tirage</button>
                </form>
              </div>
            </div>

          </div>
        </div>


        <!-- importation et tirage -->
        <div class="row py-5">
          <div class="text-center form">
            <div class="m-3">

              <form [formGroup]="myFormImportTrie" (ngSubmit)="submitImportTrie()">
                <p class="h3">Importer et trier</p>
                <div class="trait"></div><br><br>
                <div class="row">
                  <div class="mb-4 altert " style="border-radius:10px;">
                    <div>
                      <p *ngIf="bool_erreurImpTrieFr" class="m-3 alert-danger"
                        style="font-size: 1.2rem; font-weight: bold;">{{erreurImpTrieFr}}</p>
                      <p *ngIf="bool_erreurImpTrieBack"
                        [ngClass]="erreurImpTrieBack.status == true ? 'alert-success' : 'alert-warning' " class="m-3"
                        style="font-size: 1.2rem; font-weight: bold;">{{erreurImpTrieBack.contenu}}</p>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 mb-3  ">
                    <div class="mb-3 form-row form-floating">
                      <input type="text" id="libeleListe" placeholder="Libelle Liste"
                        class="form form-control inputvalue" formControlName="libelleListe">
                      <label for="libele">Libelle de la liste </label>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 mb-3">
                    <div class="mb-3 form-row form-floating ">
                      <select [(ngModel)]="libelleActivite" formControlName="libelleActivite"
                        class="form-select form-control inputvalue">
                        <option selected>--Choisir Activité--</option>
                        <option *ngFor="let listeActivites of listeActivites$" [(ngValue)]="listeActivites.nom">
                          {{listeActivites.nom}}</option>
                      </select>
                      <label style="font-size: 1.2rem; color: black;">Choisir une Activité </label>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 mb-3">
                    <div class="mb-3 form-row form-floating">
                      <input type="text" class="form-control" id="libele" placeholder="Libelle tirage"
                        formControlName="libelleTirage" class="form form-control inputvalue">
                      <label for="libele">Libelle Tirage</label>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 mb-3">
                    <div class="mb-3 form-row form-floating">
                      <input type="number" class="form-control" placeholder="Nombre à tirer" formControlName="nbreTire"
                        class="form form-control inputvalue">
                      <label for="num">Nombre à tiré </label>
                    </div>
                  </div>

                  <div class="col-12 col-md-6 mb-3">
                    <div class=" mb-3 mt-3 bttn ">
                      <input type="file" class="form-control" formControlName="file"
                        (change)="onFileChangeImportTrie($event)" />
                    </div>
                  </div>

                </div>
                <div>
                  <input type="submit" class="btn1 btnImport">
                </div>

              </form>

            </div>
          </div>

        </div>

      </div>

    </main>
  </div>
</div>